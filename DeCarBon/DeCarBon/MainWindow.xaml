<Window x:Class="DeCarBon.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:DeCarBon"
        mc:Ignorable="d"
        Title="DeCarbon 碳减排数字货币系统" Height="600" Width="1000"
        Background="#F5F5F5">
    <Grid Margin="10">
        <!-- 顶部标题栏 -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Margin="0,0,0,10" Grid.Row="0">
            <TextBlock Text="DeCarbon 碳减排数字货币系统" FontSize="24" FontWeight="Bold" Foreground="#2C3E50"/>
            <TextBlock Text=" v1.0" FontSize="14" VerticalAlignment="Bottom" Margin="5,0,0,3" Foreground="#7F8C8D"/>
        </StackPanel>

        <!-- 主内容区域 -->
        <TabControl Grid.Row="1" Margin="0,5">
            <!-- 注册钙钛矿组件 -->
            <TabItem Header="注册组件">
                <ScrollViewer Padding="10">
                    <StackPanel Margin="10">
                        <GroupBox Header="组件信息" BorderBrush="#BDC3C7">
                            <Grid Margin="5" HorizontalAlignment="Left">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="300"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Text="组件ID:" Margin="3" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="1" Margin="3" Text="{Binding PanelId}"/>

                                <TextBlock Text="生产日期:" Margin="3" VerticalAlignment="Center" Grid.Row="1"/>
                                <DatePicker Grid.Column="1" Margin="3" SelectedDate="{Binding ProductionDate}" Grid.Row="1"/>

                                <TextBlock Text="转换效率(%):" Margin="3" VerticalAlignment="Center" Grid.Row="2"/>
                                <TextBox Grid.Column="1" Margin="3" Text="{Binding Efficiency}" Grid.Row="2"/>

                                <TextBlock Text="尺寸(m²):" Margin="3" VerticalAlignment="Center" Grid.Row="3"/>
                                <TextBox Grid.Column="1" Margin="3" Text="{Binding Size}" Grid.Row="3"/>

                                <TextBlock Text="制造商:" Margin="3" VerticalAlignment="Center" Grid.Row="4"/>
                                <TextBox Grid.Column="1" Margin="3" Text="{Binding Manufacturer}" Grid.Row="4"/>

                                <TextBlock Text="碳减排量(kgCO2e/kWh):" Margin="3" VerticalAlignment="Center" Grid.Row="5"/>
                                <TextBox Grid.Column="1" Margin="3" Text="{Binding CarbonReduction}" Grid.Row="5"/>

                                <TextBlock Text="预期寿命(年):" Margin="3" VerticalAlignment="Center" Grid.Row="6"/>
                                <TextBox Grid.Column="1" Margin="3" Text="{Binding Lifetime}" Grid.Row="6"/>

                                <TextBlock Text="所有者地址:" Margin="3" VerticalAlignment="Center" Grid.Row="7"/>
                                <TextBox Grid.Column="1" Margin="3" Text="{Binding OwnerAddress}" Grid.Row="7"/>
                            </Grid>
                        </GroupBox>

                        <Button Content="注册组件" Command="{Binding RegisterPanelCommand}" 
                                Background="#3498DB" Foreground="White" Padding="10,5" 
                                HorizontalAlignment="Left"/>

                        <TextBlock Text="{Binding RegistrationResult}" Foreground="#27AE60" Margin="5"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- 钱包操作 -->
            <TabItem Header="钱包操作">
                <ScrollViewer Padding="10">
                    <StackPanel Margin="15">
                        <!-- 余额查询 -->
                        <GroupBox Header="查询余额" BorderBrush="#BDC3C7">
                            <StackPanel Orientation="Horizontal"  Margin="15">
                                <TextBox Width="200" Margin="3" Text="{Binding BalanceAddress}" 
                                         ToolTip="输入查询地址"/>
                                <Button Content="查询" Command="{Binding CheckBalanceCommand}"
                                        Background="#2ECC71" Foreground="White" Padding="10,5"/>
                                <TextBlock Text="余额: " VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding BalanceResult}" FontWeight="Bold" 
                                           VerticalAlignment="Center" Foreground="#3498DB"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 创建交易 -->
                        <GroupBox Header="创建交易" BorderBrush="#BDC3C7">
                            <Grid Margin="5" HorizontalAlignment="Left">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Text="发送方:" Margin="3" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="1" Margin="3" Text="{Binding TransactionSender}" Grid.Row="0"/>

                                <TextBlock Text="接收方:" Margin="3" VerticalAlignment="Center" Grid.Column="2"/>
                                <TextBox Grid.Column="3" Margin="3" Text="{Binding TransactionReceiver}" Grid.Row="0"/>

                                <TextBlock Text="数量:" Margin="3" VerticalAlignment="Center" Grid.Row="1"/>
                                <TextBox Grid.Column="1" Margin="3" Text="{Binding TransactionAmount}" Grid.Row="1"/>

                                <TextBlock Text="组件ID(可选):" Margin="3" VerticalAlignment="Center" Grid.Column="2"/>
                                <TextBox Grid.Column="3" Margin="3" Text="{Binding TransactionPanelId}" Grid.Row="1"/>

                                <Button Content="创建交易" Command="{Binding CreateTransactionCommand}"
                                        Grid.Row="2" Grid.ColumnSpan="4" Margin="3"
                                        Background="#3498DB" Foreground="White" Padding="10,5"
                                        HorizontalAlignment="Left"/>

                                <TextBlock Text="{Binding TransactionResult}" Grid.Row="3" Grid.ColumnSpan="4"
                                           Foreground="#27AE60" Margin="3"/>
                            </Grid>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- 智能合约 -->
            <TabItem Header="智能合约">
                <ScrollViewer Padding="10">
                    <StackPanel Margin="10">
                        <GroupBox Header="执行智能合约" BorderBrush="#BDC3C7">
                            <StackPanel Margin="5">
                                <StackPanel Orientation="Horizontal"  Margin="10,5">
                                    <TextBlock Text="选择合约:" VerticalAlignment="Center" Width="100"/>
                                    <ComboBox ItemsSource="{Binding ContractNames}" 
                                              SelectedItem="{Binding SelectedContract}"
                                              Width="200"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal"  Margin="10,5">
                                    <TextBlock Text="参数:" VerticalAlignment="Center" Width="100"/>
                                    <TextBox Width="300" Margin="3" 
                                             ToolTip="参数之间用空格分隔"
                                             Text="{Binding ContractParameters}"/>
                                    <Button Content="执行" Command="{Binding ExecuteContractCommand}"
                                            Background="#9B59B6" Foreground="White" Padding="10,5"/>
                                </StackPanel>

                                <TextBlock Text="结果:" Margin="0,10,0,5" FontWeight="Bold"/>
                                <TextBlock Text="{Binding ContractResult}" Foreground="#2980B9" 
                                           TextWrapping="Wrap" Margin="0,5,0,10"/>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="可用合约说明" BorderBrush="#BDC3C7">
                            <ListBox Margin="5" ItemsSource="{Binding ContractDescriptions}">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel>
                                            <TextBlock Text="{Binding Name}" FontWeight="Bold"/>
                                            <TextBlock Text="{Binding Description}" FontSize="12" 
                                                       Foreground="#7F8C8D" Margin="5,0,0,5"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- 区块链信息 -->
            <TabItem Header="区块链信息">
                <ScrollViewer Padding="10">
                    <StackPanel Margin="10">
                        <GroupBox Header="系统状态" BorderBrush="#BDC3C7">
                            <Grid Margin="5" >
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <TextBlock Text="当前区块高度:" Margin="5"/>
                                <TextBlock Text="{Binding BlockchainHeight}" Grid.Column="1" Margin="5" 
                                           FontWeight="Bold"/>

                                <TextBlock Text="总交易数:" Margin="5" Grid.Row="1"/>
                                <TextBlock Text="{Binding TotalTransactions}" Grid.Column="1" Grid.Row="1" 
                                           Margin="5" FontWeight="Bold"/>

                                <TextBlock Text="总碳减排量:" Margin="5" Grid.Row="2"/>
                                <TextBlock Text="{Binding TotalCarbonReduction}" Grid.Column="1" Grid.Row="2" 
                                           Margin="5" FontWeight="Bold"/>

                                <TextBlock Text="基准减排量:" Margin="5" Grid.Row="3"/>
                                <TextBlock Text="{Binding ReferenceReduction}" Grid.Column="1" Grid.Row="3" 
                                           Margin="5" FontWeight="Bold"/>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="最近区块" BorderBrush="#BDC3C7">
                            <DataGrid ItemsSource="{Binding RecentBlocks}" AutoGenerateColumns="False"
                                      CanUserAddRows="False" IsReadOnly="True">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="区块高度" Binding="{Binding Index}" Width="80"/>
                                    <DataGridTextColumn Header="时间戳" Binding="{Binding Timestamp}" Width="180"/>
                                    <DataGridTextColumn Header="哈希" Binding="{Binding Hash}" Width="*"/>
                                    <DataGridTextColumn Header="减排量(kgCO₂)" Binding="{Binding TotalCarbonReduction}" Width="120"/>
                                    <DataGridTextColumn Header="难度" Binding="{Binding Difficulty}" Width="60"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- 状态栏 -->
        <StatusBar Grid.Row="2" Margin="0,10,0,0" Height="25">
            <TextBlock Text="{Binding StatusMessage}" Foreground="#7F8C8D"/>
        </StatusBar>
    </Grid>
</Window>